# "智脑核心" (Intelli-Core) 学习平台开发计划

### **项目总览**

**项目名称:** "智脑核心" (Intelli-Core) 学习平台

**项目目标:** 构建一个模块化的实验平台，用于学习、实现和测试从简单的 RAG 问答，到复杂的、由主控程序协调的多智能体（Multi-Agent）协作系统。

**最终实现场景 (示例):** 用户输入一个复杂任务，例如：“请调研一下最近关于‘AI Agent’的最新研究，并生成一份总结报告。”
系统将任务分解，由不同的 Agent 协作完成：
1.  **研究员 Agent:** 使用 RAG 和网络搜索工具，查找相关论文、文章。
2.  **分析师 Agent:** 阅读研究员收集的资料，提炼关键点和核心洞见。
3.  **作家 Agent:** 将分析师提炼的要点，整理成一篇结构清晰、语言流畅的报告。
4.  **主控程序 (MCP):** 负责分解初始任务、协调各个 Agent 的工作流程、管理它们之间的信息传递。

---

### **技术栈选择**

为了专注于学习 LLM 核心概念而非繁琐的工程细节，我们选择当前最主流、社区支持最完善的技术栈。

*   **编程语言:** **Python 3.12+** (AI/ML 领域的绝对主力)
*   **核心框���:** **LangChain** 或 **LlamaIndex** (强烈推荐 LangChain，它对 Agent 和复杂工作流的支持非常成熟，能帮你快速上手)
*   **大语言模型 (LLM):**
    *   **开发初期:** 使用 API 调用方式，如 **Google Gemini** 或 **OpenAI GPT** 系列。这样可以避免本地部署的麻烦，专注于应用逻辑。
    *   **进阶阶段:** 尝试通过 **Ollama** 在本地运行开源模型，如 Llama 3, Mistral 等，以理解本地化部署。
*   **向量数据库 (Vector Database for RAG):**
    *   **本地开发:** **ChromaDB** 或 **FAISS**。它们轻量、易于集成，非常适合学习和原型验证。
*   **用户交互界面 (可选):** **Streamlit** 或 **Gradio**。可以让你用几行 Python 代码快速创建一个 Web UI，方便地与你的系统进行交互和调试。
*   **环境管理:** `venv` + `pip`

---

### **模块设计划分**

我们将项目划分为几个核心模块，每个模块职责分明，方便单独开发和理解。

**1. `core` - 核心模块**
*   **职责:** 存放项目的基础配置、模型加载、日志记录等通用功能。
*   **组件:**
    *   `config.py`: 管理 API 密钥、模型名称、文件路径等配置信息。
    *   `model_provider.py`: 封装 LLM 和 Embedding 模型的加载逻辑，方便切换不同的模型。

**2. `rag` - 检索增强生成模块**
*   **职责:** 实现 RAG 的所有核心功能，为其他上层模块提供“基于知识库回答问题”的能力。
*   **组件:**
    *   `document_loader.py`: 负责加载各种格式的文档（PDF, TXT, MD）。
    *   `text_splitter.py`: 将长文档切割成小的文本块（Chunks）。
    *   `vector_store.py`: 负责文本的向量化（Embeddings）并存入/检索向量数据库。
    *   `retriever.py`: 封装完整的 RAG 链，输入一个问题，能从知识库中检索并生成答案。

**3. `tools` - 工具集模块**
*   **职责:** 定义 Agent 可以使用的各种工具。工具是 Agent 与外界交互的桥梁。
*   **组件:**
    *   `base_tool.py`: 定义工具的基类接口。
    *   `search_tool.py`: 封装一个网络搜索工具（如 Google Search API）。
    *   `calculator_tool.py`: 一个简单的计算器。
    *   `rag_tool.py`: **重要：** 将 `rag` 模块封装成一个工具，让 Agent 可以查询你的私有知识库。

**4. `agent` - 智能体模块**
*   **职责:** 定义单个 Agent 的核心逻辑。这是项目中最有趣的部分之一。
*   **组件:**
    *   `prompt_template.py`: 存放和管理用于指导 Agent 行为的 Prompt 模板。
    *   `base_agent.py`: 定义单个 Agent 的结构，包含 LLM、工具集和决策逻辑（如 ReAct 框架）。
    *   `agent_executor.py`: Agent 的执行器，负责运行 Agent 的“思考-行动”循环。

**5. `mcp` - 主控程序 & 多智能体模块 (Master Control Program)**
*   **职责:** 项目的“大脑”，负责编排和协调多个 Agent 协同工作。
*   **组件:**
    *   `task_decomposer.py`: 接收用户复杂任务，并将其分解为可以分配给单个 Agent 的子任务。
    *   `agent_manager.py`: 创建和管理不同角色的 Agent 实例（如研究员、作家）。
    *   `orchestrator.py`: 核心协调器。实现工作流（Graph），决定任务的执行顺序、Agent 间的通信方式和状态管理。LangGraph 是实现这个的绝佳工具。

**6. `ui` - 用户界面模块**
*   **职责:** 提供一个简单的用户交互界面。
*   **组件:**
    *   `app.py`: 使用 Streamlit 或 Gradio 编写的启动脚本，提供输入框和输出展示区。

---

### **开发计划与学习路径 (4个阶段)**

**阶段一：实现基础 RAG 系统**
*   **任务:**
    1.  搭建好 Python 环境，安装必要的库。
    2.  在 `core` 模块中配置好你的 LLM API Key。
    3.  在 `rag` 模块中，实现一个完整的 RAG 流程：加载本地文档 -> 分割 -> 向量化并存入 ChromaDB -> 实现一个可以回答文档相关问题的问答链。
    4.  使用 `ui` 模块创建一个简单的界面来测试 RAG 功能。
*   **学习重点:**
    *   理解 Embeddings 和向量相似度搜索的原理。
    *   掌握文档加载、文本分割策略。
    *   构建基本的 LLM Chain (Query -> Prompt -> LLM -> Output)。

**阶段二：构建第一个单体 Agent**
*   **任务:**
    1.  在 `tools` 模块中，定义至少两个工具：网络搜索工具和计算器工具。
    2.  将第一阶段的 RAG 链也封装成一个工具。
    3.  在 `agent` 模块中，使用 LangChain 创建一个基于 ReAct (Reason-Act) 模式的 Agent。
    4.  让这个 Agent 能够根据问题，自主选择使用网络搜索、RAG 知识库或计算器来回答问题。
*   **学习重点:**
    *   Agent 的核心工作原理：Prompt Engineering、思考过程、工具选择和调用。
    *   ReAct 框架：如何通过“思考-行动-观察”的循环来解决问题。
    *   工具（Tools）在 Agent 架构中的作用。

**阶段三：构建 MCP 和多 Agent 协作系统**
*   **任务:**
    1.  设计多个 Agent 角色，例如：`ResearcherAgent` (擅长用搜索和 RAG 工具) 和 `WriterAgent` (擅长总结和写作)。
    2.  在 `mcp` 模块中，实现 `TaskDecomposer`，能将“写一份报告”这样的复杂任务分解为“搜集资料���和“撰写报告”两个子任务。
    3.  使用 LangChain 的 LangGraph 或自己实现一个简单的循环逻辑来作为 `Orchestrator`，先将任务分配给 `ResearcherAgent`，然后将其输出结果作为输入传递给 `WriterAgent`。
*   **学习重点:**
    *   多 Agent 协作的常见模式（如：流水线模式、分层模式）。
    *   任务分解和规划的逻辑。
    *   状态管理：如何在 Agent 之间传递信息和维持一个共享的工作状态。
    *   **MCP 的核心价值：** 从“单个工具人”到“自动化团队管理者”的跃迁。

**阶段四：评估、优化与扩展**
*   **任务:**
    1.  为整个系统增加详细的日志，追踪每个 Agent 的思考链和工具调用过程。
    2.  尝试更换不同的 LLM，观察对 Agent 行为的影响。
    3.  优化 Prompt，让 Agent 的角色定位更清晰，协作更顺畅。
    4.  (选做) 引入记忆模块（Memory），让 Agent 能够记住历史对话。
*   **学习重点:**
    *   调试和评估复杂 LLM 系统的方法。
    *   Prompt Engineering 在多 Agent 系统中的重要性。
    *   当前 Agent 技术的局限性和挑战。
